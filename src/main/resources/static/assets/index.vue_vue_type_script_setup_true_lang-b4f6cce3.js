import{d as w,g,c as q,H as N,a as d,o as v,h,w as t,f as l,i as x,t as E,u as D,q as O,D as U,e as y,I as F,z as T,b as $,F as S,s as I,C as z,E as L,G as B,m as R}from"./index-7d1a1b21.js";import{u as M}from"./index-75e1a29f.js";import{l as P}from"./index-e8832633.js";import{_ as j}from"./index.vue_vue_type_script_setup_true_lang-2c737504.js";const G={style:{margin:"16px 0 0 10px"}},W={style:{margin:"0 10px","padding-right":"100px","min-height":"32px"}},H={style:{margin:"10px"}},Y={style:{position:"absolute",top:"40px",right:"40px"}},J=w({__name:"Single",props:{modelValue:{type:Object,required:!0}},emits:["action"],setup(V,{emit:_}){const i=V,r=g(null),{isOutside:n}=M(r),m=q(()=>({height:"160px","border-radius":"6px","background-color":i.modelValue.color||N()}));function c(u){_("action",u,i.modelValue)}return(u,o)=>{const e=d("el-button"),f=d("el-col"),a=d("el-row");return v(),h(a,{style:{padding:"16px"}},{default:t(()=>[l(f,{span:24,style:F(m.value),ref_key:"target",ref:r},{default:t(()=>[x("h2",G,E(D(i).modelValue.name),1),x("div",W,E(D(i).modelValue.description),1),O(x("div",H,[l(e,{type:"primary",onClick:o[0]||(o[0]=p=>c("design"))},{default:t(()=>[y("Design")]),_:1}),l(e,{type:"success",onClick:o[1]||(o[1]=p=>c("launch"))},{default:t(()=>[y("Launch")]),_:1}),l(e,{type:"default",onClick:o[2]||(o[2]=p=>c("edit"))},{default:t(()=>[y("Setting")]),_:1}),l(e,{type:"danger",onClick:o[3]||(o[3]=p=>c("delete"))},{default:t(()=>[y("Delete")]),_:1})],512),[[U,!D(n)]])]),_:1},8,["style"]),x("div",Y,[l(P,{icon:V.modelValue.icon,size:"4em"},null,8,["icon"])])]),_:1})}}}),K={class:"dialog-footer"},Q=w({__name:"AppDialog",setup(V,{expose:_}){function i(o,e){n.value=o,m=e,r.value=!0}const r=g(!1),n=g({});let m;const c=g(),u=async o=>{o&&await o.validate(e=>{e&&(r.value=!1,m&&m(n.value))})};return _({show:i}),(o,e)=>{const f=d("el-input"),a=d("el-form-item"),p=d("lc-icon-picker"),b=d("el-color-picker"),A=d("el-form"),k=d("el-button"),C=d("el-dialog");return v(),h(C,{modelValue:r.value,"onUpdate:modelValue":e[7]||(e[7]=s=>r.value=s),title:"Application editor","destroy-on-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!1},{footer:t(()=>[x("span",K,[l(k,{onClick:e[5]||(e[5]=s=>r.value=!1)},{default:t(()=>[y("Cancel")]),_:1}),l(k,{type:"primary",onClick:e[6]||(e[6]=s=>u(c.value))},{default:t(()=>[y(" Save ")]),_:1})])]),default:t(()=>[l(A,{ref_key:"appEditorFormRef",ref:c,model:n.value,"label-width":"120px"},{default:t(()=>[l(a,{label:"ID",prop:"_id"},{default:t(()=>[l(f,{modelValue:n.value._id,"onUpdate:modelValue":e[0]||(e[0]=s=>n.value._id=s),disabled:!0},null,8,["modelValue"])]),_:1}),l(a,{label:"Name",prop:"name",required:""},{default:t(()=>[l(f,{modelValue:n.value.name,"onUpdate:modelValue":e[1]||(e[1]=s=>n.value.name=s)},null,8,["modelValue"])]),_:1}),l(a,{label:"Description",prop:"description"},{default:t(()=>[l(f,{modelValue:n.value.description,"onUpdate:modelValue":e[2]||(e[2]=s=>n.value.description=s)},null,8,["modelValue"])]),_:1}),l(a,{label:"Icon",prop:"icon"},{default:t(()=>[l(p,{modelValue:n.value.icon,"onUpdate:modelValue":e[3]||(e[3]=s=>n.value.icon=s)},null,8,["modelValue"])]),_:1}),l(a,{label:"Color",prop:"color"},{default:t(()=>[l(b,{modelValue:n.value.color,"onUpdate:modelValue":e[4]||(e[4]=s=>n.value.color=s)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),X=x("h3",null,"Add a new application",-1),Z=w({__name:"index",emits:["action"],setup(V,{emit:_}){const i=T("globalContext"),r=g([]);n();function n(){i.request({method:"GET",url:"app/findAll"}).then(function(a){r.value=a.list})}function m(a,p){a=="edit"?o(p):a=="delete"?e(p):_("action",a,p)}const c=g();function u(){c.value.show({},f)}function o(a){const p=z(a);c.value.show(p,f)}const e=a=>{L.confirm("Will you want to delte this application?All the menus and pages under this application will be deleted!","Warning",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning"}).then(()=>{i.request({method:"POST",url:"app/delete",params:{id:a._id}}).then(function(){n(),B({message:"Application deleted",type:"success"})})})},f=a=>{i.request({method:"POST",url:"app/save",data:a}).then(function(){n(),B({message:"Application saved",type:"success"})})};return(a,p)=>{const b=d("el-col"),A=d("lc-icon"),k=d("el-button"),C=d("el-row");return v(),$(S,null,[l(C,null,{default:t(()=>[(v(!0),$(S,null,I(r.value,s=>(v(),h(b,{span:6,key:s._id},{default:t(()=>[l(J,{modelValue:s,onAction:m},null,8,["modelValue"])]),_:2},1024))),128)),l(b,{span:6},{default:t(()=>[l(C,{style:{padding:"16px"}},{default:t(()=>[l(b,{span:24,style:{height:"160px",width:"100%","border-radius":"6px",padding:"16px","background-color":"#137372"}},{default:t(()=>[l(k,{type:"success",link:"",style:{"margin-top":"48px","margin-left":"96px"},onClick:u},{default:t(()=>[l(A,{icon:"mdiPlus",size:"x-large"}),X]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(Q,{ref_key:"appDialogRef",ref:c},null,512)],64)}}});const ne=w({__name:"index",setup(V){const _=T("globalContext"),i=g("list"),r=g({});function n(u,o){u=="design"?m(o):u=="launch"&&c(o)}function m(u){_.router.push("/design/"+u._id)}function c(u){_.router.push("/deploy/"+u._id+"/ROOT")}return(u,o)=>(v(),$(S,null,[i.value=="list"?(v(),h(Z,{key:0,onAction:n})):R("",!0),i.value=="design"?(v(),h(j,{key:1,modelValue:r.value._id,onReturn:o[0]||(o[0]=e=>i.value="list")},null,8,["modelValue"])):R("",!0)],64))}});export{ne as _};
