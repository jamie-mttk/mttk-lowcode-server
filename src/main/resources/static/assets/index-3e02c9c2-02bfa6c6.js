import{t as K,Y as N,m as k}from"./transformUtil-999da02b-e777606b.js";import{h as S}from"./tooltipUtil-4635a4f7-2c64bc23.js";import{b as B,c as C,a as I}from"./index-1ede4d6c-b9d7dc37.js";import{ad as l,aT as y,k as V,d as h,z as x,b as r,c,i as o,j as u,q as z,F as O,h as j,N as _,f as A}from"./index-5e7b76fe.js";import"./biTool-e603ec91-3f60f9c4.js";import"./index-3458eb1c-625f9c79.js";import"./chartActionUtil-201ccd97-6331c097.js";import"./_plugin-vue_export-helper-dad06003-f875bd67.js";const E={class:"stat-single-container"},F={class:"stat-single-title"},L={class:"stat-single-subtitle"},M={class:"stat-single-value"},W=h({__name:"StatisticSingle",props:["title","subtitle","value"],setup(a){const e=a;return(d,m)=>(r(),c("div",E,[o("div",F,u(e.title||""),1),o("div",L,u(e.subtitle||""),1),o("div",M,u(e.value||"-"),1)]))}}),D={key:0,class:"title-area"},G={class:"title"},H={class:"subtitle"},J={class:"stat-container"},Q=h({__name:"Statistic",props:["data","qtyPerRow","title","subtitle"],setup(a){const e=a,d=x(()=>n=>{const i=e.qtyPerRow||4,t={};return t.width=100/i+"%",m(n,i,(e.data||[]).length)||(t["border-bottom"]="1px solid rgb(0,0,0,0.1)"),t});function m(n,i,t){const s=parseInt(t%i==0?t/i:t/i+1);return n>i*(s-1)-1}const p=x(()=>n=>{const i=e.qtyPerRow||4,t={"padding-left":"8 px"};return n%i!=0&&(t["border-left"]="1px solid rgb(0,0,0,0.1)"),t}),b=x(()=>e.title||e.subtitle);return(n,i)=>(r(),c("div",null,[b.value?(r(),c("div",D,[o("div",G,u(e.title),1),o("div",H,u(e.subtitle),1)])):z("",!0),o("div",J,[(r(!0),c(O,null,j(e.data,(t,s)=>(r(),c("div",{class:"stat-single",style:_(d.value(s))},[A(W,{title:t.title,subtitle:t.subtitle,value:t.value,style:_(p.value(s))},null,8,["title","subtitle","value","style"])],4))),256))])]))}}),P=[{key:"metric",min:1},{key:"_dimensionAndMetric",min:1}];function T({config:a,data:e,context:d,key:m,contextWrap:p,fullConfig:b}){const n=N({config:a,data:e,context:d,key:m,contextWrap:p,fullConfig:b},P,void 0);if(n)return n;const i=b.config.model;return t();function t(){return{"~":Q,data:s(),qtyPerRow:a.qtyPerRow||4,title:a["title-text"]||"",subtitle:a["title-subtext"]||""}}function s(){const f=k(i,"metric",0),w=f?.label||"",q=[];let R=!0;const v=!!k(i,"dimension",0);for(const g of V(e).data||[]){if(R){R=!1;continue}q.push({title:v?g[0]:w,subtitle:v?w:"",value:S(v?g[1]:g[0],f)})}return q}}const U=K(T,P,void 0),at={key:"_bi_indicatorKanban",name:l.t("bi.widgets.indicatorKanban.name"),description:"",icon:"mdiNumeric10BoxMultipleOutline",sequence:23,transform:U,editor:{model:B({type:"indicatorKanban"},["dimension",{_type:"metric",prop:"metric",label:l.t("bi.widgets.indicatorKanban.metric"),option:{maxRow:1,minRow:1}},...C]),basic:{init:{qtyPerRow:4},ui:[y.createInput("title-text",l.t("bi.widgets.indicatorKanban.title-text")),y.createInput("title-subtext",l.t("bi.widgets.indicatorKanban.title-subtext")),y.createInputNumber("qtyPerRow",l.t("bi.widgets.indicatorKanban.qtyPerRow"),{min:1})]},...I({initStyle:{height:""}})}};export{at as default};
