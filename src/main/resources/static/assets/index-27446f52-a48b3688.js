import{l as b,p as h,X as w}from"./transformUtil-999da02b-e777606b.js";import{r as c}from"./dataUtil-c2d4e754-c2780e53.js";import{h as v}from"./tooltipUtil-4635a4f7-2c64bc23.js";import{b as _,c as x,d as j,a as z}from"./index-1ede4d6c-b9d7dc37.js";import{ad as e,aT as d,k as R}from"./index-5e7b76fe.js";import"./biTool-e603ec91-3f60f9c4.js";import"./index-3458eb1c-625f9c79.js";import"./chartActionUtil-201ccd97-6331c097.js";import"./_plugin-vue_export-helper-dad06003-f875bd67.js";const q=[{key:"dimension",min:2},{key:"_dimensionAndMetric",eq:3}];function S({config:i,data:o,context:t,key:a,contextWrap:n,fullConfig:m}){const s=m.config.model,r=R(o).data||[],p=c(r,0),u=c(r,1),f=C(p,u),y=F(r);return{...h({config:i,skipGrid:!0}),tooltip:{valueFormatter(g){var l;const k=(((l=s.metric)==null?void 0:l.length)||0)==1?s.metric[0]:s.dimension[2];return v(g,k)}},series:[{type:"sankey",layout:"none",top:(w(i)==2?86:64)+"px",emphasis:{focus:"adjacency"},orient:i.orient||"horizontal",nodeAlign:i["node-align"]||"justify",data:f,links:y}]}}const A=b(S,q,void 0,{skipDataset:!0});function C(i,o){const t=[];for(const n of i)t.includes(n)||t.push(n);for(const n of o)t.includes(n)||t.push(n);const a=[];for(const n of t)a.push({name:n});return a}function F(i){const o=[];for(const t of i)o.push({source:t[0],target:t[1],value:t[2]});return o}const $={key:"_bi_sankey",name:e.t("bi.widgets.sankey.name"),description:"",icon:"mdiChartSankeyVariant",sequence:33,transform:A,editor:{model:_({type:"sankey"},[{_type:"dimension",description:e.t("bi.widgets.sankey.dimension_description"),option:{maxRow:3,minRow:2}},{_type:"metric",description:e.t("bi.widgets.sankey.metric_description"),option:{maxRow:1,minRow:0}},...x]),basic:{init:{orient:"horizontal","node-align":"justify"},ui:[...j(),d.createSelect("orient",[{label:e.t("bi.widgets.sankey.orient_horizontal"),value:"horizontal"},{label:e.t("bi.widgets.sankey.orient_vertical"),value:"vertical"}],e.t("bi.widgets.sankey.orient")),d.createSelect("node-align",[{label:e.t("bi.widgets.sankey.node-align_justify"),value:"justify"},{label:e.t("bi.widgets.sankey.node-align_left"),value:"left"},{label:e.t("bi.widgets.sankey.node-align_right"),value:"right"}],e.t("bi.widgets.sankey.node-align"))]},...z()}};export{$ as default};
