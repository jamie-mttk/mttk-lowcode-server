import{d as A,S as E,g as x,j as q,a as y,o as p,b as B,f as w,y as M,w as F,F as $,K as g,c,U as K,h as m,i as k,e as T,t as W,m as f,q as z,G as P,z as H,r as R,u as _,n as G}from"./index-1207c5cc.js";import{c as J}from"./index-4a136cf3.js";const D=A({__name:"MyInput",props:{modelValue:{}},emits:["update:modelValue"],setup(e,{emit:t}){const o=e,l=E().type=="textarea"?3e3:500,s=x(o.modelValue);q(()=>o.modelValue,a=>{s.value=a}),J(s,()=>{t("update:modelValue",s.value)},{debounce:l,maxWait:3e3});const u=x(!1);function b(){u.value=!0}return(a,r)=>{const d=y("el-input"),h=y("el-drawer");return p(),B($,null,[w(d,M({modelValue:s.value,"onUpdate:modelValue":r[0]||(r[0]=i=>s.value=i)},a.$attrs,{onDblclick:b}),null,16,["modelValue"]),w(h,{modelValue:u.value,"onUpdate:modelValue":r[2]||(r[2]=i=>u.value=i),direction:"rtl",size:"30%",title:"Edit data in drawer window"},{default:F(()=>[w(d,{modelValue:s.value,"onUpdate:modelValue":r[1]||(r[1]=i=>s.value=i),type:"textarea",rows:20},null,8,["modelValue"])]),_:1},8,["modelValue"])],64)}}});function L(e,t,o){e["allow-create"]&&(e.filterable=!0);let n=t["~options"];if(g(n)&&(n=n.value),!!n)if(Array.isArray(n))e["#"]=I(n);else if(typeof n=="function")e["#"]=Q(n);else if(typeof n=="string")if(n=="#method")e["#"]=ee(o).value;else if(n=="#data")e["#"]=Y(o).value;else if(n=="#computed")e["#"]=Z(o).value;else if(n=="#api")e["#"]=C(o).value;else throw"If options is string,it should be some special values,now it is"+n;else throw"Unsupported value options type:"+typeof n}function I(e){if(!Array.isArray(e))return;const t=[];for(const o of e)if(typeof o=="string"){const n=X(o);t.push({sys:{component:"el-option"},props:{label:n[1],value:n[0]}})}else if(typeof o=="object")t.push({sys:{component:"el-option"},props:{label:o.label,value:o.value}});else throw"Unsupported value option type:"+typeof o;return t}function Q(e){return I(e())}function X(e){const t=e.indexOf(":");return t<0?[e,e]:[e.substring(0,t),e.substring(t+1)]}function Y(e){return c(()=>e.codeManager.getCode().data.map(t=>({sys:{component:"el-option"},props:{value:t.key,label:t.description}})))}function Z(e){return c(()=>e.codeManager.getCode().computed.map(t=>({sys:{component:"el-option"},props:{value:t.key,label:t.description}})))}function C(e){return c(()=>e.codeManager.getCode().apis.map(t=>({sys:{component:"el-option"},props:{value:t.key,label:t.description}})))}function ee(e){return c(()=>e.codeManager.getCode().methods.map(t=>({sys:{component:"el-option"},props:{value:t.key,label:t.description}})))}function te(e,t){if(!t)return;const o=t.value;if(!o)return;const n="button";if(Array.isArray(o))e["#"]=S(t,o,n);else if(typeof o=="function")e["#"]=oe(t,o,n);else throw"Unsupported value option type:"+typeof o}function S(e,t,o){const n=e.labelField||"id",l=e.valueField||"name",s=[];for(const u of t)s.push({sys:{component:o=="standard"?"el-radio":"el-radio-button"},props:{label:u[l]},slots:{default:""+u[n]}});return s}function oe(e,t,o){return S(e,t(),o)}function ne(e){v(e,"lang","javascript"),v(e,"width","100%"),v(e,"height","20vh"),v(e,"readonly",!1),v(e,"font-size",14)}function v(e,t,o){e[t]==null&&(e[t]=o)}function le(e,t,o){const n={"~component":re(t["~component"]),"~modelValue":e,"~modelValuePath":t["~prop"]};N(n,t,!0);const l=O(t["~component"]);return l=="elselect"?L(n,t,o):l=="elradiogroup"?te(n,t["~options"]):l=="baceeditor"&&ne(n),n}function O(e){return typeof e!="string"?e:e.replaceAll("-","").toLowerCase()}function re(e){return typeof e!="string"?void 0:O(e)=="elinput"?D:e}const se={class:"lc-common-toolbar",style:{"background-color":"transparent"}},U=A({__name:"FormItem",props:{modelValue:{type:Object,required:!0,default(){return{}}},config:{type:Object,required:!0,default(){return{}}},pageContext:{type:Object,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const o=e,n=c({get:()=>o.modelValue[o.config["~prop"]],set:a=>{const r=o.modelValue;r[o.config["~prop"]]=a,t("update:modelValue",r)}}),l=x(b()),s=c(()=>le(o.modelValue,o.config,o.pageContext)),u=c(()=>!(O(o.config["~component"])=="elinput"||o.config["~hideSwitchButton"]));function b(){const a=n.value;return K(a)?"exp":"raw"}return(a,r)=>{const d=y("lc-icon"),h=y("CompWrap"),i=y("el-form-item");return p(),m(i,{prop:o.config["~prop"]},{label:F(()=>[k("div",se,[k("div",null,[T(W(e.config["~label"])+" ",1),e.config["~description"]?(p(),m(d,{key:0,icon:"mdiHelpCircleOutline",tooltip:e.config["~description"]},null,8,["tooltip"])):f("",!0)]),z(k("div",null,[l.value=="exp"?(p(),m(d,{key:0,icon:"mdiExponent",tooltip:"Expression",onClick:r[0]||(r[0]=V=>l.value="raw")})):f("",!0),l.value=="raw"?(p(),m(d,{key:1,icon:"mdiFormSelect",tooltip:"Raw componnet",onClick:r[1]||(r[1]=V=>l.value="exp")})):f("",!0)],512),[[P,u.value]])])]),default:F(()=>[l.value=="raw"?(p(),m(h,{key:0,config:s.value},null,8,["config"])):f("",!0),l.value=="exp"?(p(),m(D,{key:1,modelValue:n.value,"onUpdate:modelValue":r[2]||(r[2]=V=>n.value=V)},null,8,["modelValue"])):f("",!0)]),_:1},8,["prop"])}}});function de(e,t,o,n=!1){o||(o=H("context")),typeof e=="function"&&(e=e(t)),Array.isArray(e)&&(e={_children:e});const l=R({});N(l,ae(t),!1),n&&l["#"].push({"~component":U,"~modelValue":t,config:{"~component":"el-switch","~label":"Hide component","~prop":"~hideComponent"},pageContext:o});for(const s of e._children||[])l["#"].push(j(t,s,o));return l}function N(e,t,o){for(const n of Object.keys(t))o&&n.startsWith("~")||(e[n]=t[n])}function ae(e){return{"~component":"ElForm",labelPosition:"top",model:e,"#":[]}}function j(e,t,o){if(t["~component"]=="el-collapse")return ue(e,t,o);const n=t["~prop"];return(_(e)[n]==null||_(e)[n]==null)&&t["~default"]!=null&&(g(e)?e.value[n]=t["~default"]:e[n]=t["~default"]),{"~component":U,"~show":t["~show"],"~instanceKeyAsKey":!0,"~modelValue":e,config:t,pageContext:o}}function ue(e,t,o){const n=G();return{"~component":"el-collapse",accordion:!0,"model-value":n,"~styles":{padding:"4px","margin-bottom":"8px",border:"1px groove #F2F3F5","border-radius":"5px"},"#":{"~component":"el-collapse-item",name:n,"#title":{type:"html",value:'<span style="font-weight:bold">'+t["~label"]||"</span>"},"#":ie(e,t,o)}}}function ie(e,t,o){const n=[];for(const l of t._children||[])n.push(j(e,l,o));return n}export{D as _,de as f};
