import{d as w,g as f,c as q,I as N,a as d,o as g,h as k,w as l,f as o,i as x,t as E,u as $,q as O,G as F,e as y,J as U,z as T,b as D,F as S,s as z,D as I,E as L,H as B,m as R}from"./index-fe75cf19.js";import{u as M}from"./index-4816b981.js";import{l as P}from"./index-73fa7c58.js";import{_ as j}from"./index.vue_vue_type_script_setup_true_lang-ec470aac.js";const G={style:{margin:"16px 0 0 10px"}},W={style:{margin:"0 10px"}},H={style:{margin:"10px"}},J={style:{position:"absolute",top:"40px",right:"80px"}},Y=w({__name:"Single",props:{modelValue:{type:Object,required:!0}},emits:["action"],setup(V,{emit:_}){const s=V,r=f(null),{isOutside:n}=M(r),m=q(()=>({height:"160px","border-radius":"6px","background-color":s.modelValue.color||N()}));function c(i){_("action",i,s.modelValue)}return(i,t)=>{const e=d("el-button"),v=d("el-col"),a=d("el-row");return g(),k(a,{style:{padding:"16px"}},{default:l(()=>[o(v,{span:24,style:U(m.value),ref_key:"target",ref:r},{default:l(()=>[x("h2",G,E($(s).modelValue.name),1),x("div",W,E($(s).modelValue.description),1),O(x("div",H,[o(e,{type:"primary",onClick:t[0]||(t[0]=p=>c("design"))},{default:l(()=>[y("Design")]),_:1}),o(e,{type:"success",onClick:t[1]||(t[1]=p=>c("launch"))},{default:l(()=>[y("Launch")]),_:1}),o(e,{type:"default",onClick:t[2]||(t[2]=p=>c("edit"))},{default:l(()=>[y("Setting")]),_:1}),o(e,{type:"danger",onClick:t[3]||(t[3]=p=>c("delete"))},{default:l(()=>[y("Delete")]),_:1})],512),[[F,!$(n)]])]),_:1},8,["style"]),x("div",J,[o(P,{icon:V.modelValue.icon,size:"4em"},null,8,["icon"])])]),_:1})}}}),K={class:"dialog-footer"},Q=w({__name:"AppDialog",setup(V,{expose:_}){function s(t,e){n.value=t,m=e,r.value=!0}const r=f(!1),n=f({});let m;const c=f(),i=async t=>{t&&await t.validate(e=>{e&&(r.value=!1,m&&m(n.value))})};return _({show:s}),(t,e)=>{const v=d("el-input"),a=d("el-form-item"),p=d("lc-icon-picker"),b=d("el-color-picker"),A=d("el-form"),h=d("el-button"),C=d("el-dialog");return g(),k(C,{modelValue:r.value,"onUpdate:modelValue":e[6]||(e[6]=u=>r.value=u),title:"Application editor","destroy-on-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!1},{footer:l(()=>[x("span",K,[o(h,{onClick:e[4]||(e[4]=u=>r.value=!1)},{default:l(()=>[y("Cancel")]),_:1}),o(h,{type:"primary",onClick:e[5]||(e[5]=u=>i(c.value))},{default:l(()=>[y(" Save ")]),_:1})])]),default:l(()=>[o(A,{ref_key:"appEditorFormRef",ref:c,model:n.value,"label-width":"120px"},{default:l(()=>[o(a,{label:"Name",prop:"name",required:""},{default:l(()=>[o(v,{modelValue:n.value.name,"onUpdate:modelValue":e[0]||(e[0]=u=>n.value.name=u)},null,8,["modelValue"])]),_:1}),o(a,{label:"Description",prop:"description"},{default:l(()=>[o(v,{modelValue:n.value.description,"onUpdate:modelValue":e[1]||(e[1]=u=>n.value.description=u)},null,8,["modelValue"])]),_:1}),o(a,{label:"Icon",prop:"icon"},{default:l(()=>[o(p,{modelValue:n.value.icon,"onUpdate:modelValue":e[2]||(e[2]=u=>n.value.icon=u)},null,8,["modelValue"])]),_:1}),o(a,{label:"Color",prop:"color"},{default:l(()=>[o(b,{modelValue:n.value.color,"onUpdate:modelValue":e[3]||(e[3]=u=>n.value.color=u)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),X=x("h3",null,"Add a new application",-1),Z=w({__name:"index",emits:["action"],setup(V,{emit:_}){const s=T("globalContext"),r=f([]);n();function n(){s.request({method:"GET",url:"app/findAll"}).then(function(a){r.value=a.list})}function m(a,p){a=="edit"?t(p):a=="delete"?e(p):_("action",a,p)}const c=f();function i(){c.value.show({},v)}function t(a){const p=I(a);c.value.show(p,v)}const e=a=>{L.confirm("Will you want to delte this application?All the menus and pages under this application will be deleted!","Warning",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning"}).then(()=>{s.request({method:"POST",url:"app/delete",params:{id:a._id}}).then(function(){n(),B({message:"Application deleted",type:"success"})})})},v=a=>{s.request({method:"POST",url:"app/save",data:a}).then(function(){n(),B({message:"Application saved",type:"success"})})};return(a,p)=>{const b=d("el-col"),A=d("lc-icon"),h=d("el-button"),C=d("el-row");return g(),D(S,null,[o(C,null,{default:l(()=>[(g(!0),D(S,null,z(r.value,u=>(g(),k(b,{span:6,key:u._id},{default:l(()=>[o(Y,{modelValue:u,onAction:m},null,8,["modelValue"])]),_:2},1024))),128)),o(b,{span:6},{default:l(()=>[o(C,{style:{padding:"16px"}},{default:l(()=>[o(b,{span:24,style:{height:"160px",width:"100%","border-radius":"6px",padding:"16px","background-color":"#137372"}},{default:l(()=>[o(h,{type:"success",link:"",style:{"margin-top":"48px","margin-left":"96px"},onClick:i},{default:l(()=>[o(A,{icon:"mdiPlus",size:"x-large"}),X]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(Q,{ref_key:"appDialogRef",ref:c},null,512)],64)}}});const ne=w({__name:"index",setup(V){const _=T("globalContext"),s=f("list"),r=f({});function n(i,t){i=="design"?m(t):i=="launch"&&c(t)}function m(i){_.router.push("/design/"+i._id)}function c(i){_.router.push("/deploy/"+i._id+"/ROOT")}return(i,t)=>(g(),D(S,null,[s.value=="list"?(g(),k(Z,{key:0,onAction:n})):R("",!0),s.value=="design"?(g(),k(j,{key:1,modelValue:r.value._id,onReturn:t[0]||(t[0]=e=>s.value="list")},null,8,["modelValue"])):R("",!0)],64))}});export{ne as _};
