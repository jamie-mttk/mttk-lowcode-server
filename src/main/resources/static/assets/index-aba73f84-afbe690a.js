import{l as _,p as z,m as g}from"./transformUtil-999da02b-e777606b.js";import{r as v,u as w}from"./dataUtil-c2d4e754-c2780e53.js";import{h as k}from"./tooltipUtil-4635a4f7-2c64bc23.js";import{b as L,c as R,d as S,a as q}from"./index-1ede4d6c-b9d7dc37.js";import{ad as t,aT as y,k as I}from"./index-5e7b76fe.js";import"./biTool-e603ec91-3f60f9c4.js";import"./index-3458eb1c-625f9c79.js";import"./chartActionUtil-201ccd97-6331c097.js";import"./_plugin-vue_export-helper-dad06003-f875bd67.js";const M=[{key:"dimension",min:2},{key:"metric",min:1}];function O({config:e,data:n,context:a,key:r,contextWrap:f,fullConfig:b}){var m,l;const o=b.config.model,u=I(n).data||[],p=v(u,0),c=v(u,1),h=D(u,p,c),x=N(u);return{...z({config:e}),tooltip:{formatter:function(s){const d=o.metric[0];let i='<div style="font-weight:700;">'+(c[s.value[1]]||"")+"</div>";return i+='<div style="display:grid;grid-template-columns: auto auto auto;grid-gap: 4px 8px;">',i+="<div>"+(s.marker||"")+"</div>",i+="<div>"+(p[s.value[0]]||"")+"</div>",i+="<div>"+(k(s.value[2],d)||"")+"</div>",i+="</div>",i}},xAxis:{type:"category",name:(m=g(o,"dimension",0))==null?void 0:m.label,boundaryGap:!1,data:p,splitLine:{show:e["split-line-mode"]=="x"||e["split-line-mode"]=="both"},axisLine:{show:!1}},yAxis:{type:"category",name:(l=g(o,"dimension",1))==null?void 0:l.label,splitLine:{show:e["split-line-mode"]=="y"||e["split-line-mode"]=="both"},axisLine:{show:!1},data:c},series:[{name:"",type:"scatter",symbolSize:function(s){const d=e["symbol-size"]||40;let i=e["symbol-size-base"]||5;return i>=d&&(i=d/2),Math.abs(s[2])/x*(d-i)+i},data:h,animationDelay:function(s){return s*5}}]}}const A=_(O,M,void 0,{skipDataset:!0});function D(e,n,a){const r=w(n),f=w(a),b=[];let m=!0;for(const l of e){if(m){b.push(l),m=!1;continue}const o=[];b.push(o),o.push(r[l[0]]),o.push(f[l[1]]),o.push(l[2])}return b}function N(e){let n=0,a=!0;for(const r of e){if(a){a=!1;continue}n=Math.max(n,Math.abs(r[2]))}return n}const B={key:"_bi_bubble",name:t.t("bi.widgets.bubble.name"),description:"",icon:"mdiScatterPlotOutline",sequence:41,transform:A,editor:{model:L({type:"bubble"},[{_type:"dimension",description:t.t("bi.widgets.bubble.dimension_description"),option:{maxRow:2,minRow:2}},{_type:"metric",description:t.t("bi.widgets.bubble.metric_description"),option:{maxRow:1,minRow:1}},...R]),basic:{init:{"symbol-size":40,"symbol-size-base":5,"split-line-mode":"x"},ui:[...S(),y.createInputNumber("symbol-size",t.t("bi.widgets.bubble.symbol-size")),y.createInputNumber("symbol-size-base",t.t("bi.widgets.bubble.symbol-size-base")),y.createSelect("split-line-mode",[{label:t.t("bi.widgets.bubble.split-line-mode_none"),value:"none"},{label:t.t("bi.widgets.bubble.split-line-mode_x"),value:"x"},{label:t.t("bi.widgets.bubble.split-line-mode_y"),value:"y"},{label:t.t("bi.widgets.bubble.split-line-mode_both"),value:"both"}],t.t("bi.widgets.bubble.split-line-mode"))]},...q()}};export{B as default};
