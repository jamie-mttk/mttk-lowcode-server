import{l as M,p as A,m as f,u as R}from"./transformUtil-999da02b-1268ffeb.js";import{r as v,u as w}from"./dataUtil-c2d4e754-c2780e53.js";import{h as g}from"./tooltipUtil-4635a4f7-2c64bc23.js";import{b as S,c as q,d as B,a as C}from"./index-1ede4d6c-021f9bd8.js";import{ad as t,aT as y,k as T}from"./index-168435c7.js";import"./biTool-e603ec91-d05b025b.js";import"./index-3458eb1c-88d55814.js";import"./chartActionUtil-201ccd97-c4d73bc9.js";import"./_plugin-vue_export-helper-dad06003-f875bd67.js";const $=[{key:"dimension",min:2},{key:"metric",min:1}];function D({config:e,data:a,context:m,key:d,contextWrap:b,fullConfig:l}){var r,i,o;const p=l.config.model,c=T(a).data||[],u=v(c,0),h=v(c,1),x=F(c,u,h),_=I(c);return{...A({config:e}),tooltip:{formatter:function(s){const k=p.metric[0];let n='<div style="font-weight:700;">'+(h[s.value[1]]||"")+"</div>";return n+='<div style="display:grid;grid-template-columns: auto auto auto;grid-gap: 4px 8px;">',n+="<div>"+(s.marker||"")+"</div>",n+="<div>"+(u[s.value[0]]||"")+"</div>",n+="<div>"+(g(s.value[2],k)||"")+"</div>",n+="</div>",n}},xAxis:{type:"category",name:(r=f(p,"dimension",0))==null?void 0:r.label,data:u,splitArea:{show:e["split-area-mode"]=="x"||e["split-area-mode"]=="both"}},yAxis:{type:"category",name:(i=f(p,"dimension",1))==null?void 0:i.label,data:h,splitArea:{show:e["split-area-mode"]=="y"||e["split-area-mode"]=="both"}},visualMap:{min:0,max:_,show:!1},series:[{name:(o=R(p))==null?void 0:o.label,type:"heatmap",data:x,label:{show:!!e["show-label"],formatter:function(s){return g(s.value[2],p.metric[0])}},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}const E=M(D,$,void 0,{skipDataset:!0});function F(e,a,m){const d=w(a),b=w(m),l=[];let r=!0;for(const i of e){if(r){l.push(i),r=!1;continue}const o=[];l.push(o),o.push(d[i[0]]),o.push(b[i[1]]),o.push(i[2])}return l}function I(e){let a=0,m=!0;for(const d of e){if(m){m=!1;continue}a=Math.max(a,Math.abs(d[2]))}return a}const K={key:"_bi_heatmap",name:t.t("bi.widgets.heatmap.name"),description:"",icon:"mdiFilmstripBoxMultiple",sequence:43,transform:E,editor:{model:S({type:"heatmap"},[{_type:"dimension",description:t.t("bi.widgets.heatmap.dimension_description"),option:{maxRow:2,minRow:2}},{_type:"metric",description:t.t("bi.widgets.heatmap.metric_description"),option:{maxRow:1,minRow:1}},...q]),basic:{init:{"split-area-mode":"both"},ui:[...B(),y.createSelect("split-area-mode",[{label:t.t("bi.widgets.heatmap.split-area-mode_none"),value:"none"},{label:t.t("bi.widgets.heatmap.split-area-mode_x"),value:"x"},{label:t.t("bi.widgets.heatmap.split-area-mode_y"),value:"y"},{label:t.t("bi.widgets.heatmap.split-area-mode_both"),value:"both"}],t.t("bi.widgets.heatmap.split-area-mode")),y.createSwitch("show-label",t.t("bi.widgets.heatmap.show-label"))]},...C()}};export{K as default};
