function p(e,u){let n="";const a=d(u);if(Array.isArray(e)){e.length>0&&(n+=s(e[0])),n+=t();for(let i=0;i<e.length;i++)n+=l(e[i],i,a,u);n+=f()}else n+=s(e),n+=t(),n+=l(e,0,a,u),n+=f();return n}function t(){return'<div style="display:grid;grid-template-columns: auto auto auto;grid-gap: 4px 8px;">'}function f(){return"</div>"}function s(e){return'<div style="font-weight:700;">'+(e?.name||"")+"</div>"}function l(e,u,n,a){let i="<div>"+(e.marker||"")+"</div>";i+="<div>"+e.seriesName+"</div>";const o=n+u;if(e.data.length<=o)return i;const r=e.data[o],c=v(u,a);return i+='<div style="text-align: right">'+_(r,c)+"</div>",i}function v(e,u){var n;const a=((n=u?.config)==null?void 0:n.model)||{};for(const i of Object.keys(a))if(i.startsWith("metric")){const o=a[i]||[];for(const r of o){if(e==0)return r;e--}}}function d(e){var u;let n=0;const a=((u=e?.config)==null?void 0:u.model)||{};for(const i of Object.keys(a))if(i.startsWith("dimension")){const o=a[i]||[];n+=o.length}return n}function _(e,u){try{return u?.dataType=="number"||u?.dataType=="integer"?(e||(e=0),m(e,u)):e}catch(n){return console.log("formatData error",n),e}}function m(e,u){if(typeof e!="number")return e;const{value:n,suffix:a}=h(e,u);let i=g(n,u);return i=x(i,u),i=b(i,u),(u._format_number_prefix||"")+i+(a||"")+(u._format_number_suffix||"")}function h(e,u){typeof e=="string"&&(e=parseFloat(e));const n=u._format_number_converter||"none";return n=="ch_auto"?Math.abs(e)<1e4?{value:e}:Math.abs(e)<1e6?{value:e/1e4,suffix:"万"}:Math.abs(e)<1e4*1e4?{value:e/1e6,suffix:"百万"}:{value:e/(1e4*1e4),suffix:"亿"}:n=="en_auto"?Math.abs(e)<1e3?{value:e}:Math.abs(e)<1e3*1e3?{value:e/1e3,suffix:"K"}:{value:e/(1e3*1e3),suffix:"M"}:n=="percentage"?{value:e*100,suffix:"%"}:n=="ch_qian"?{value:e/1e3,suffix:"千"}:n=="ch_wan"?{value:e/1e4,suffix:"万"}:n=="ch_baiwan"?{value:e/1e6,suffix:"百万"}:n=="ch_qianwan"?{value:e/1e7,suffix:"千万"}:n=="ch_yi"?{value:e/(1e4*1e4),suffix:"亿"}:n=="en_k"?{value:e/1e3,suffix:"K"}:n=="en_m"?{value:e/1e6,suffix:"M"}:{value:e}}function g(e,u){const n=u._format_number_point;return n==null?e.toString():e.toFixed(n)}function x(e,u){return u._format_number_thousandth_mark?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):e}function b(e,u){const n=u._format_number_negative;return!n||n!="bracketed"?e:e.startsWith("-")?"("+e.substring(1)+")":e}export{p as M,_ as h};
