import{d as h,r as g,D as V,z as w,a as n,b as B,c as U,f as l,g as t,p,j as f,F as T,v as D,i as M,s as j,T as I,W as k}from"./index-5e7b76fe.js";const R={class:"dialog-footer"},F=h({__name:"LifecycleEditorDialog",setup(E,{expose:_}){function i(o,e){u.value=o,v=e,d.value=!0}const d=g(!1),u=g({});let v;const m=g(),C=async o=>{o&&await o.validate(e=>{e&&(d.value=!1,v&&v(u.value))})};return _({show:i}),(o,e)=>{const a=n("el-option"),y=n("el-select"),r=n("el-form-item"),x=n("b-ace-editor"),$=n("el-form"),s=n("el-button"),b=n("el-dialog");return B(),D(b,{modelValue:d.value,"onUpdate:modelValue":e[4]||(e[4]=c=>d.value=c),title:"Lifecycle editor","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:t(()=>[M("span",R,[l(s,{onClick:e[2]||(e[2]=c=>d.value=!1)},{default:t(()=>[p(f(o.$t("_._.cancel")),1)]),_:1}),l(s,{type:"primary",onClick:e[3]||(e[3]=c=>C(m.value))},{default:t(()=>[p(f(o.$t("_._.save")),1)]),_:1})])]),default:t(()=>[l($,{ref_key:"dataEditorFormRef",ref:m,model:u.value,"label-width":"120px"},{default:t(()=>[l(r,{label:o.$t("_.builtIn.plugin.lifecycleEditor.key"),prop:"key",required:""},{default:t(()=>[l(y,{modelValue:u.value.key,"onUpdate:modelValue":e[0]||(e[0]=c=>u.value.key=c)},{default:t(()=>[l(a,{value:"onMounted"}),l(a,{value:"onUpdated"}),l(a,{value:"onUnmounted"}),l(a,{value:"onBeforeMount"}),l(a,{value:"onBeforeUpdate"}),l(a,{value:"onBeforeUnmount"}),l(a,{value:"onErrorCaptured"}),l(a,{value:"onRenderTracked"}),l(a,{value:"onRenderTracked"}),l(a,{value:"onActivated"}),l(a,{value:"onDeactivated"})]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(r,{label:o.$t("_.builtIn.plugin.lifecycleEditor.code"),prop:"code",required:""},{default:t(()=>[l(x,{modelValue:u.value.code,"onUpdate:modelValue":e[1]||(e[1]=c=>u.value.code=c),lang:"javascript",width:"100%",height:"30vh",readonly:!1,"font-size":14},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),q=h({__name:"index",setup(E){const _=g();let i=-1;const d=V("context");function u(){i=-1,_.value.show({mode:"script",code:""},m)}function v(e){i=e.$index;const a=j(e.row);_.value.show(a,m)}const m=e=>{i<0?o.value.push(e):o.value[i]=e},C=e=>{I.confirm(k("_.builtIn.plugin.lifecycleEditor.deletePrompt"),k("_._.warning"),{confirmButtonText:k("_._.yes"),cancelButtonText:k("_._.no"),type:"warning"}).then(()=>{o.value.splice(e.$index,1)})},o=w(()=>d.codeManager.getCode().lifecycle);return(e,a)=>{const y=n("el-table-column"),r=n("el-button"),x=n("el-button-group"),$=n("el-table");return B(),U(T,null,[l($,{data:o.value,border:""},{empty:t(()=>[l(r,{type:"primary",onClick:a[1]||(a[1]=s=>u())},{default:t(()=>[p(f(e.$t("_._.add")),1)]),_:1})]),default:t(()=>[l(y,{prop:"key",label:e.$t("_.builtIn.plugin.lifecycleEditor.key")},null,8,["label"]),l(y,{fixed:"right",label:e.$t("_._.operation"),width:"280px"},{default:t(s=>[l(x,null,{default:t(()=>[l(r,{type:"primary",onClick:a[0]||(a[0]=b=>u())},{default:t(()=>[p(f(e.$t("_._.add")),1)]),_:1}),l(r,{type:"success",onClick:b=>v(s)},{default:t(()=>[p(f(e.$t("_._.edit")),1)]),_:2},1032,["onClick"]),l(r,{type:"danger",onClick:b=>C(s)},{default:t(()=>[p(f(e.$t("_._.del")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"]),l(F,{ref_key:"lifecycleEditorDialogRef",ref:_},null,512)],64)}}});export{q as default};
